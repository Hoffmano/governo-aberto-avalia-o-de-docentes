(window.webpackJsonp=window.webpackJsonp||[]).push([["vendors~infogram-charts/charts-pictorial_bar"],{H7NR:function(t,e,a){"use strict";a.r(e),a.d(e,"PictorialBar",function(){return B});var r=a("eYsL"),n=a.n(r),i=a("vBe5"),o=a("ziQ1"),c=a("+3eq"),l=a("GBhQ"),s=a("QbiP"),u=a("2LMz"),h=a("+odC"),p=a("Io7g"),f=a("xuOt"),g=a("JEEB"),d=a("7S+G"),b=a("AF4e"),v=a("t9/8"),y=a("XlgC");function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function O(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function j(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t,e,a){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(a):n.value}})(t,e,a||t)}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e,a){return e&&S(t.prototype,e),a&&S(t,a),t}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,k(e).call(this,t,"div"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,g["PictorialGrid"]),D(e,null,[{key:"getClassName",value:function(){return"PictorialBar"}}]),D(e,[{key:"render",value:function(){var t=this;this.detectDimensions();var e=this.options,a=this.root,r=new d.Renderer({instance:this}),n=this.getSheetData(),f=Object(p.default)(n),g=this.runtime={width:e.width,height:e.height,inanimate:Object(u.inanimated)(e),sheet:n,formatter:f},b={top:10,right:10,bottom:10,left:10,pictorial:1},y=this.prepareSheetData(n),m=y.data;this.sizeMultiplier=1,a.select(".igc-pictorial-bar-visual").remove();var w=g.svg=a.append("svg").attr("class","igc-pictorial-bar-visual");this.groupTagName="g",Object(s.default)(this,{width:e.width}),Object(v.DownloadButton)(this,e.style.legend);var O=Object(l.legendHelper)({instance:this});if(O&&O.chartType("pictorial-grid"),!this.sheetsNotFound()){var j=!!e.series.showText?m[0].text:"",x=this.createAnimationCounter(2),k=e.style.graph.item.value,S=g.width-b.left-b.right,D=g.height-b.top-b.bottom,P=g.height,B=this.setupBarText(j,y.colors,k),M={width:Math.round(S/2),height:Math.round(D)},C=parseInt(k["font-size"],10),T=this.drawBarText(B,M,b,C,!1,y.textLink),E=M.height-T.height;E>=0?B.styles({top:b.top+E/2+"px"}):(D+=Math.abs(E),P+=Math.abs(E)),T.width>0&&(S-=T.width+10);var I=n.categories.shapes;I.length||(I=this.defaults().shapes.map(function(t){return t.title})),I=Object(h.availableShapesMetrics)(e.shapes,w)(I);var A=Object.values(I).reduce(function(t,e){return t.width=Math.max(t.width,e.bbox.width+b.pictorial),t.height=Math.max(t.height,e.bbox.height),t},{width:0,height:0}),F=this.getValueSum(m),_=S/F/A.width,L=D/A.height,R=Math.min(_,L);I=this.initShapesScaled(I,R),A=Object.values(I).reduce(function(t,e){return t.width=Math.max(t.width,e.bbox.width+b.pictorial),t.height=Math.max(t.height,e.bbox.height),t},{width:0,height:0});var z={cols:Math.min(F,Math.floor(S/A.width)),rows:1,cellMetrics:A};z.cellCount=z.rows*z.cols,z.colPosition=Object(o.scaleBand)().domain(Object(i.range)(0,z.cols)).range([0,S]).padding(0),z.rowPosition=Object(o.scaleBand)().domain(Object(i.range)(0,z.rows)).range([(D-A.height)/2,D]).padding(0),z.realNumbers=!1;var G=y.data=this.getShapeDataScattered(n,m,z,I,F);y.overlayData=this.getShapeGroupOverlayPaths(m,G,z),this.prepareShapes(I,R);var N={igc:{x:b.left,y:b.top}};this.containerSetup(),w.attr("width",g.width).attr("height",P);var Q=w.select(".igc");r.add(function(){w.datum(t).transition().ease(c[e.animation.ease]).duration(e.animation.duration).on("start",function(){t.events.call("startAnimation")}).on("end",function(){x()}),Q.attr("transform","translate(".concat(N.igc.x,", ").concat(N.igc.y,")"))}),r.addGraph([{graphs:[y],transitionDuration:e.animation.duration,legend:O,originalScale:R,animationEnd:x}]),r.start()}}},{key:"prepareSheetData",value:function(t){var e=t.categories.shapes,a=this.getSheetColors(),r=t.series[0],n="".concat(r.rawData[0]),i=-1!==Object(f.replaceBlank)(n).indexOf("%"),o={value:Object(f.replaceBlank)(Math.abs(r.data[0]),0),valueLabel:Object(f.replaceBlank)(r.rawData[3]),category:Object(f.replaceBlank)(r.rawData[2]),text:Object(f.replaceBlank)(r.rawData[3]),shape:e[0],categoryIdx:0,link:r.links?r.links[0]:null},c={value:Object(f.replaceBlank)(Math.abs(r.data[1]),0),valueLabel:Object(f.replaceBlank)(r.rawData[3]),category:Object(f.replaceBlank)(""),shape:e[0],categoryIdx:1,link:r.links?r.links[1]:null};return i?(o.value=c.value*(o.value/100),c.value-=o.value):o.value>c.value?c.value=0:(o.value=c.value-(c.value-o.value),c.value-=o.value),Object(l.createLegendData)(this)({color:a[0],title:o.category,groupId:0}),o.value===c.value&&0===o.value&&(c.value=1),{type:r.type,data:[o,c],colors:a,textLink:r.links?r.links[3]:null}}},{key:"getSheetColors",value:function(){var t=this.runtime,e=n.a.get(t,"sheet"),a=n.a.get(e,"categories"),r=n.a.get(e,"series[0].index",0),i=a.inactiveColor,o=a.inactiveColorAlpha;return void 0!==o&&(i=y.Colors.rgbStrToRgbaStr(i,o)),[n.a.get(a,"colors[".concat(r,"]")),i]}},{key:"initShapesScaled",value:function(t,e){var a=this.runtime.svg;return Object.keys(t).reduce(function(r,n){var i=t[n].shape,o=Object(f.measurePath)(i,a,e);return r[n]={shape:i,bbox:o},r},{})}},{key:"prepareShapes",value:function(t,e){var a=this.runtime.svg;a.selectAll("defs").data([0]).enter().append("defs");var r=a.select("defs");Object.keys(t).forEach(function(a){var n=t[a].shape,i="igc-cp-"+a+this.chartId;r.selectAll("#"+i).data([0]).enter().append("clipPath").attr("id",i).selectAll("path").data([0]).enter().append("path").attr("d",n),r.selectAll("#"+i).attr("transform","scale("+e+")")},this)}},{key:"graphInstanceSetup",value:function(t,e,a,r,n){var i=e.data.length,o=this.runtime.formatter,c=Object(u.removeDelay)(this,function(t,e){return e/i*500});t.data(e.data).overlayData(e.overlayData).colors(e.colors).groupId(n).highlightFirstOnly(!0).tooltip(Object(b.createStyledTooltip)(this)).tooltipText(function(t){return t.category}).tooltipValue(function(t){return o.tooltip.x.format(t.valueLabel)}).transitionDelay(c).transitionDuration(r.transitionDuration),t.dispatch().on("animationEnd",r.animationEnd)}},{key:"setupBarText",value:function(t,e,a){var r=this.root,i=this.options.style.graph.item.value;r.select(".igc-pictorial-bar-text-container").remove();var o=r.insert("div",".igc-pictorial-bar-visual").attr("class",".igc-pictorial-bar-text-container".slice(1));o.styles({width:"".concat(this.runtime.width,"px")});var c=n.a.pick(a,["font-family","font-weight","font-style"]);return o.append("div").attr("class","igc-pictorial-bar-text").text(t).styles(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach(function(e){O(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({position:"absolute",color:i.color||e[0]},c))}},{key:"drawBarText",value:function(t,e,a,r,n,i){var o=this.interaction;t.styles({"font-size":"".concat(r,"px"),top:"".concat(a.top,"px"),right:"".concat(a.right,"px")}),t.style("width",null),n&&t.style("width","".concat(e.width,"px"));var c={width:t.node().offsetWidth,height:t.node().offsetHeight};return c.width>e.width?this.drawBarText(t,e,a,r,!0,i):c.height>e.height&&r>11?(r--,this.drawBarText(t,e,a,r,!1,i)):(t.classed("igc-chart-link",!!i).on("click",function(){Object(f.openUrl)(i,o)}),c)}},{key:"containerSetup",value:function(){var t=this.runtime.svg;t.selectAll("defs").data([0]).enter().append("defs");var e=t.selectAll(".igc").data([0]);e.merge(e.enter().append("g").attr("class","igc"))}},{key:"defaults",value:function(){var t={};return n.a.merge(t,x(k(e.prototype),"defaults",this).call(this),{style:{graph:{item:{value:{"font-size":"60px"}}}}}),n.a.unset(t,"style.graph.item.value.color"),t}},{key:"emptySheetData",value:function(){return n.a.merge({},x(k(e.prototype),"emptySheetData",this).call(this),{categories:{inactiveColor:"#959595"}})}},{key:"applySheetOptions",value:function(t){function e(e){return t[e]||t[0]}t&&this.options.sheets.forEach(function(t,a){var r=e(a+1);r.categories&&n.a.merge(t.categories,r.categories),t.series.forEach(function(t){"bar"===t.type&&r.bar&&n.a.merge(t,r.bar)}),r.legend&&n.a.merge(t.legend,r.legend),t.iconSizeMultiplier=1})}}]),e}()},XlgC:function(t,e,a){"use strict";a.r(e),a.d(e,"Colors",function(){return i});var r=a("SC+/");function n(t){return(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3}var i={getContrastYIQ:function(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e=e||"#000000",a=a||"#ffffff";var i=n(t);r&&(n(e)>=128&&(e="#000000"),n(a)<128&&(a="#ffffff"));return i>=128?e:a},getContrast:function(t){return t.r+1.2*t.g+.7*t.b>510?Object(r.rgb)("#000000"):Object(r.rgb)("#FFFFFF")},rgbStrToRgbaStr:function(t,e){var a=Object(r.rgb)(t);return a.opacity=e,a.toString()}}}}]);